age_group == "Y69" |
age_group == "Y70" |
age_group == "Y71" |
age_group == "Y72" |
age_group == "Y73" |
age_group == "Y74" |
age_group == "Y75" |
age_group == "Y76" |
age_group == "Y77" |
age_group == "Y78" |
age_group == "Y79" |
age_group == "Y80" |
age_group == "Y81" |
age_group == "Y82" |
age_group == "Y83" |
age_group == "Y84" |
age_group == "Y85" |
age_group == "Y86" |
age_group == "Y87" |
age_group == "Y88" |
age_group == "Y89" |
age_group == "Y90" |
age_group == "Y91" |
age_group == "Y92" |
age_group == "Y93" |
age_group == "Y94" |
age_group == "Y95" |
age_group == "Y96" |
age_group == "Y97" |
age_group == "Y98" |
age_group == "Y99" |
age_group == "Y100"
)
) %>%
group_by(a_iso) %>%
summarize_at("value",
sum,
na.rm = TRUE
)
colnames(z_pop_12p) <- c("a_iso","a_pop_12p")
View(z_pop_12p)
View(b_vxrate)
View(b_details)
View(b_details_red)
View(b_vxrate)
z_pop_12p <- z_pop_total %>%
filter(
gender == "BOTH" & (
age_group == "Y12" |
age_group == "Y13" |
age_group == "Y14" |
age_group == "Y15" |
age_group == "Y16" |
age_group == "Y17" |
age_group == "Y18" |
age_group == "Y19" |
age_group == "Y20" |
age_group == "Y21" |
age_group == "Y22" |
age_group == "Y23" |
age_group == "Y24" |
age_group == "Y25" |
age_group == "Y26" |
age_group == "Y27" |
age_group == "Y28" |
age_group == "Y29" |
age_group == "Y30" |
age_group == "Y31" |
age_group == "Y32" |
age_group == "Y33" |
age_group == "Y34" |
age_group == "Y35" |
age_group == "Y36" |
age_group == "Y37" |
age_group == "Y38" |
age_group == "Y39" |
age_group == "Y40" |
age_group == "Y41" |
age_group == "Y42" |
age_group == "Y43" |
age_group == "Y44" |
age_group == "Y45" |
age_group == "Y46" |
age_group == "Y47" |
age_group == "Y48" |
age_group == "Y49" |
age_group == "Y50" |
age_group == "Y51" |
age_group == "Y52" |
age_group == "Y53" |
age_group == "Y54" |
age_group == "Y55" |
age_group == "Y56" |
age_group == "Y57" |
age_group == "Y58" |
age_group == "Y59" |
age_group == "Y60" |
age_group == "Y61" |
age_group == "Y62" |
age_group == "Y63" |
age_group == "Y64" |
age_group == "Y65" |
age_group == "Y66" |
age_group == "Y67" |
age_group == "Y68" |
age_group == "Y69" |
age_group == "Y70" |
age_group == "Y71" |
age_group == "Y72" |
age_group == "Y73" |
age_group == "Y74" |
age_group == "Y75" |
age_group == "Y76" |
age_group == "Y77" |
age_group == "Y78" |
age_group == "Y79" |
age_group == "Y80" |
age_group == "Y81" |
age_group == "Y82" |
age_group == "Y83" |
age_group == "Y84" |
age_group == "Y85" |
age_group == "Y86" |
age_group == "Y87" |
age_group == "Y88" |
age_group == "Y89" |
age_group == "Y90" |
age_group == "Y91" |
age_group == "Y92" |
age_group == "Y93" |
age_group == "Y94" |
age_group == "Y95" |
age_group == "Y96" |
age_group == "Y97" |
age_group == "Y98" |
age_group == "Y99" |
age_group == "Y100"
)
) %>%
group_by(a_iso) %>%
summarize_at("value",
sum,
na.rm = TRUE
)
colnames(z_pop_12p) <- c("a_iso","a_pop_12p")
# Rows 1648 - 1719
run_base <- function(env = .GlobalEnv) {
source("src/base/base_smartsheet.r")
print(" > Starting local environment for base data...")
print(" > Base smartsheet...")
b_smartsheet <- load_base_smartsheet()
b_smartsheet <- transform_base_smartsheet(
b_smartsheet
)
print(" > Done.")
print(" > WHO dashboard...")
b_who_dashboard <- load_who_dashboard()
print(" > Done.")
print(" > Concerted support list...")
b_csl <- load_conc_supp_list()
print(" > Done.")
print(" > Returning to local environment. ")
print(" > Loading data back to global environment...")
env$b_smartsheet <- b_smartsheet
env$b_who_dashboard <- b_who_dashboard
env$b_csl <- b_csl
return(environment())
}
run_base()
#export_env <- run_export()
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
# HELPERS
source("helpers/joins.r")
source("helpers/transformations.r")
# ETL
source("src/base/run_base.r")
source("src/entity/run_entity.r")
source("src/population/run_population.r")
source("src/supply/run_supply.R")
source("src/vaccines/run_vaccines.r")
base_env <- run_base()
entity_env <- run_entity()
pop_env <- run_population()
supply_env <- run_supply()
vaccines_env <- run_vaccines(entity_characteristics)
# EDA
source("eda/vxrate/run_vxrate.r")
source("eda/supplies/run_supplies.r")
source("eda/coverage/run_coverage.r")
source("eda/product/run_product.r")
source("eda/rank-bin/run_rank_bin.r")
source("eda/consolidate/run_consolidate.r")
#source("eda/export/run_export.r")
vxrate_env <- run_vxrate(entity_characteristics, population_data, uptake_gender_data, c_vxrate_latest)
supplies_env <- run_eda_supplies(a_data, supply_secured, delivery_courses_doses)
coverage_env <- run_coverage(a_data)
product_env <- run_product(a_data, base_env$b_smartsheet, base_env$b_csl)
ranking_env <- run_binning(a_data)
consolidate_env <- run_consolidate(a_data)
#export_env <- run_export()
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
# Clear environment
rm(list = ls())
# HELPERS
source("helpers/joins.r")
source("helpers/transformations.r")
# ETL
source("src/base/run_base.r")
source("src/entity/run_entity.r")
source("src/population/run_population.r")
source("src/supply/run_supply.R")
source("src/vaccines/run_vaccines.r")
base_env <- run_base()
entity_env <- run_entity()
pop_env <- run_population()
supply_env <- run_supply()
vaccines_env <- run_vaccines(entity_characteristics)
# EDA
source("eda/vxrate/run_vxrate.r")
source("eda/supplies/run_supplies.r")
source("eda/coverage/run_coverage.r")
source("eda/product/run_product.r")
source("eda/rank-bin/run_rank_bin.r")
source("eda/consolidate/run_consolidate.r")
# source("eda/export/run_export.r")
vxrate_env <- run_vxrate(entity_characteristics, population_data, uptake_gender_data, c_vxrate_latest)
supplies_env <- run_eda_supplies(a_data, supply_secured, delivery_courses_doses)
coverage_env <- run_coverage(a_data)
product_env <- run_product(a_data, base_env$b_smartsheet, base_env$b_csl)
ranking_env <- run_binning(a_data)
consolidate_env <- run_consolidate(a_data)
# export_env <- run_export()
View(a_data)
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
# Clear environment
rm(list = ls())
# HELPERS
source("helpers/joins.r")
source("helpers/transformations.r")
# ETL
source("src/base/run_base.r")
source("src/entity/run_entity.r")
source("src/population/run_population.r")
source("src/supply/run_supply.R")
source("src/vaccines/run_vaccines.r")
base_env <- run_base()
entity_env <- run_entity()
pop_env <- run_population()
supply_env <- run_supply()
vaccines_env <- run_vaccines(entity_characteristics)
# EDA
source("eda/vxrate/run_vxrate.r")
source("eda/supplies/run_supplies.r")
source("eda/coverage/run_coverage.r")
source("eda/product/run_product.r")
source("eda/rank-bin/run_rank_bin.r")
source("eda/consolidate/run_consolidate.r")
# source("eda/export/run_export.r")
vxrate_env <- run_vxrate(entity_characteristics, population_data, uptake_gender_data, c_vxrate_latest)
supplies_env <- run_eda_supplies(a_data, supply_secured, delivery_courses_doses)
coverage_env <- run_coverage(a_data)
product_env <- run_product(a_data, base_env$b_smartsheet, base_env$b_csl)
ranking_env <- run_binning(a_data)
consolidate_env <- run_consolidate(a_data)
# export_env <- run_export()
View(a_data)
# Rows 1648 - 1719
run_base <- function(env = .GlobalEnv) {
source("src/base/base_smartsheet.r")
print(" > Starting local environment for base data...")
print(" > Base smartsheet...")
b_smartsheet <- load_base_smartsheet()
b_smartsheet <- transform_base_smartsheet(
b_smartsheet
)
print(" > Done.")
print(" > WHO dashboard...")
b_who_dashboard <- load_who_dashboard()
print(" > Done.")
print(" > Concerted support list...")
b_csl <- load_conc_supp_list()
print(" > Done.")
print(" > Returning to local environment. ")
print(" > Loading data back to global environment...")
env$b_smartsheet <- b_smartsheet
env$b_who_dashboard <- b_who_dashboard
env$b_csl <- b_csl
return(environment())
}
run_base()
View(b_smartsheet)
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
# Clear environment
rm(list = ls())
# HELPERS
source("helpers/joins.r")
source("helpers/transformations.r")
# ETL
source("src/base/run_base.r")
source("src/entity/run_entity.r")
source("src/population/run_population.r")
source("src/supply/run_supply.R")
source("src/vaccines/run_vaccines.r")
base_env <- run_base()
entity_env <- run_entity()
pop_env <- run_population()
supply_env <- run_supply()
vaccines_env <- run_vaccines(entity_characteristics)
# EDA
source("eda/vxrate/run_vxrate.r")
source("eda/supplies/run_supplies.r")
source("eda/coverage/run_coverage.r")
source("eda/product/run_product.r")
source("eda/rank-bin/run_rank_bin.r")
source("eda/consolidate/run_consolidate.r")
# source("eda/export/run_export.r")
vxrate_env <- run_vxrate(entity_characteristics, population_data, uptake_gender_data, c_vxrate_latest)
supplies_env <- run_eda_supplies(a_data, supply_secured, delivery_courses_doses)
coverage_env <- run_coverage(a_data)
product_env <- run_product(a_data, base_env$b_smartsheet, base_env$b_csl)
ranking_env <- run_binning(a_data)
consolidate_env <- run_consolidate(a_data)
# export_env <- run_export()
View(b_smartsheet)
# Rows 1648 - 1719
run_base <- function(env = .GlobalEnv) {
source("src/base/base_smartsheet.r")
print(" > Starting local environment for base data...")
print(" > Base smartsheet...")
b_smartsheet <- load_base_smartsheet()
b_smartsheet <- transform_base_smartsheet(
b_smartsheet
)
print(" > Done.")
print(" > WHO dashboard...")
b_who_dashboard <- load_who_dashboard()
print(" > Done.")
print(" > Concerted support list...")
b_csl <- load_conc_supp_list()
print(" > Done.")
print(" > Returning to local environment. ")
print(" > Loading data back to global environment...")
env$b_smartsheet <- b_smartsheet
env$b_who_dashboard <- b_who_dashboard
env$b_csl <- b_csl
return(environment())
}
run_base()
View(b_smartsheet)
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
# Clear environment
rm(list = ls())
# HELPERS
source("helpers/joins.r")
source("helpers/transformations.r")
# ETL
source("src/base/run_base.r")
source("src/entity/run_entity.r")
source("src/population/run_population.r")
source("src/supply/run_supply.R")
source("src/vaccines/run_vaccines.r")
base_env <- run_base()
entity_env <- run_entity()
pop_env <- run_population()
supply_env <- run_supply()
vaccines_env <- run_vaccines(entity_characteristics)
# EDA
source("eda/vxrate/run_vxrate.r")
source("eda/supplies/run_supplies.r")
source("eda/coverage/run_coverage.r")
source("eda/product/run_product.r")
source("eda/rank-bin/run_rank_bin.r")
source("eda/consolidate/run_consolidate.r")
# source("eda/export/run_export.r")
vxrate_env <- run_vxrate(entity_characteristics, population_data, uptake_gender_data, c_vxrate_latest)
supplies_env <- run_eda_supplies(a_data, supply_secured, delivery_courses_doses)
coverage_env <- run_coverage(a_data)
product_env <- run_product(a_data, base_env$b_smartsheet, base_env$b_csl)
ranking_env <- run_binning(a_data)
consolidate_env <- run_consolidate(a_data)
# export_env <- run_export()
View(b_smartsheet)
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
# Clear environment
rm(list = ls())
# HELPERS
source("helpers/joins.r")
source("helpers/transformations.r")
# ETL
source("src/base/run_base.r")
source("src/entity/run_entity.r")
source("src/population/run_population.r")
source("src/supply/run_supply.R")
source("src/vaccines/run_vaccines.r")
base_env <- run_base()
entity_env <- run_entity()
pop_env <- run_population()
supply_env <- run_supply()
vaccines_env <- run_vaccines(entity_characteristics)
# EDA
source("eda/vxrate/run_vxrate.r")
source("eda/supplies/run_supplies.r")
source("eda/coverage/run_coverage.r")
source("eda/product/run_product.r")
source("eda/rank-bin/run_rank_bin.r")
source("eda/consolidate/run_consolidate.r")
# source("eda/export/run_export.r")
vxrate_env <- run_vxrate(entity_characteristics, population_data, uptake_gender_data, c_vxrate_latest)
supplies_env <- run_eda_supplies(a_data, supply_secured, delivery_courses_doses)
coverage_env <- run_coverage(a_data)
product_env <- run_product(a_data, base_env$b_smartsheet, base_env$b_csl)
ranking_env <- run_binning(a_data)
consolidate_env <- run_consolidate(a_data)
# export_env <- run_export()
# Rows 1648 - 1719
run_base <- function(env = .GlobalEnv) {
source("src/base/base_smartsheet.r")
print(" > Starting local environment for base data...")
print(" > Base smartsheet...")
b_smartsheet <- load_base_smartsheet()
b_smartsheet <- transform_base_smartsheet(
b_smartsheet
)
print(" > Done.")
print(" > WHO dashboard...")
b_who_dashboard <- load_who_dashboard()
print(" > Done.")
print(" > Concerted support list...")
b_csl <- load_conc_supp_list()
print(" > Done.")
print(" > Returning to local environment. ")
print(" > Loading data back to global environment...")
env$b_smartsheet <- b_smartsheet
env$b_who_dashboard <- b_who_dashboard
env$b_csl <- b_csl
return(environment())
}
run_base()
View(b_smartsheet)
# Rows 1648 - 1719
run_base <- function(env = .GlobalEnv) {
source("src/base/base_smartsheet.r")
print(" > Starting local environment for base data...")
print(" > Base smartsheet...")
b_smartsheet <- load_base_smartsheet()
b_smartsheet <- transform_base_smartsheet(
b_smartsheet
)
print(" > Done.")
print(" > WHO dashboard...")
b_who_dashboard <- load_who_dashboard()
print(" > Done.")
print(" > Concerted support list...")
b_csl <- load_conc_supp_list()
print(" > Done.")
print(" > Returning to local environment. ")
print(" > Loading data back to global environment...")
env$b_smartsheet <- b_smartsheet
env$b_who_dashboard <- b_who_dashboard
env$b_csl <- b_csl
return(environment())
}
run_base()
View(b_smartsheet)
