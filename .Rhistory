# Ingest the 2 file from DAMC folder
# Take 3 variables from each of these files
# - total doses administered
# - total_doses_1d
# - fully vaccinated
# a1d - at least 1 dose
# adm_td - total dose
# adm_fv - fully vaccinated
library("readxl")
library("writexl")
library("countrycode")
library("dplyr")
library("lubridate")
library("tidyr")
library("data.table")
library("bit64")
library("openxlsx")
library("tidyverse")
# Load pre_jan 2022 data
pre_jan <-
data.frame(read_excel("data/_input/lily/pre_jan.xlsx",
sheet = "data_summary"))
pre_jan <- select(
pre_jan,
c(
"iso_code",
"population",
"total_doses",
"at_least_one_dose",
"fully_vaccinated"
)
)
colnames(pre_jan) <- c(
"a_iso",
"a_pop",
"adm_td",
"adm_a1d",
"adm_fv"
)
post_jan <- data.frame(read_excel("data/_input/lily/post_jan.xlsx",
sheet = "data_summary"))
post_jan <- select(
post_jan,
c(
"iso_code",
"population",
"total_doses",
"at_least_one_dose",
"fully_vaccinated"
)
)
colnames(post_jan) <- c(
"a_iso",
"a_pop",
"adm_td",
"adm_a1d",
"adm_fv"
)
# Fully vaccinated
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = as.numeric(adm_fv / a_pop))
# Load pre_jan 2022 data
pre_jan <-
data.frame(read_excel("data/_input/lily/pre_jan.xlsx",
sheet = "data_summary"))
setwd("C:/Users/xander/OneDrive - Dalberg Global Development Advisors/Projects/covid19_vaccination_analysis")
# Load pre_jan 2022 data
pre_jan <-
data.frame(read_excel("data/_input/lily/pre_jan.xlsx",
sheet = "data_summary"))
pre_jan <- select(
pre_jan,
c(
"iso_code",
"population",
"total_doses",
"at_least_one_dose",
"fully_vaccinated"
)
)
colnames(pre_jan) <- c(
"a_iso",
"a_pop",
"adm_td",
"adm_a1d",
"adm_fv"
)
View(pre_jan)
post_jan <- data.frame(read_excel("data/_input/lily/post_jan.xlsx",
sheet = "data_summary"))
post_jan <- select(
post_jan,
c(
"iso_code",
"population",
"total_doses",
"at_least_one_dose",
"fully_vaccinated"
)
)
colnames(post_jan) <- c(
"a_iso",
"a_pop",
"adm_td",
"adm_a1d",
"adm_fv"
)
View(post_jan)
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = as.numeric(adm_fv / a_pop))
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = adm_fv / a_pop)
pre_jan_fv
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = pre_jan$adm_fv / pre_jan$a_pop)
# Fully vaccinated
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = adm_fv / a_pop)
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = adm_fv[,5] / a_pop[,2])
# # Fully vaccinated
pre_jan[,1]
# # Fully vaccinated
pre_jan[,5]
# # Fully vaccinated
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop)
# # Fully vaccinated
pre_jan_fv <- pre_jan %>%
mutate(cov_total_fv = as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop))
pre_jan$cov_total_fv(as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop))
# # Fully vaccinated
pre_jan$cov_total_fv <- (as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop))
pre_jan_fv
pre_jan
# post_jan data
## Fully vaccinated
post_jan$cov_total_fv <- (as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop))
# post_jan data
## Fully vaccinated
post_jan$cov_total_fv <- (as.numeric(post_jan$adm_fv) / as.numeric(post_jan$a_pop))
# Ingest the 2 file from DAMC folder
# Take 3 variables from each of these files
# - total doses administered
# - total_doses_1d
# - fully vaccinated
# a1d - at least 1 dose
# adm_td - total dose
# adm_fv - fully vaccinated
# library("readxl")
# library("writexl")
# library("countrycode")
# library("dplyr")
# library("lubridate")
# library("tidyr")
# library("data.table")
# library("bit64")
# library("openxlsx")
# library("tidyverse")
# Load pre_jan 2022 data
pre_jan <-
data.frame(read_excel("data/_input/lily/pre_jan.xlsx",
sheet = "data_summary"))
pre_jan <- select(
pre_jan,
c(
"iso_code",
"population",
"total_doses",
"at_least_one_dose",
"fully_vaccinated"
)
)
colnames(pre_jan) <- c(
"a_iso",
"a_pop",
"adm_td",
"adm_a1d",
"adm_fv"
)
post_jan <- data.frame(read_excel("data/_input/lily/post_jan.xlsx",
sheet = "data_summary"))
post_jan <- select(
post_jan,
c(
"iso_code",
"population",
"total_doses",
"at_least_one_dose",
"fully_vaccinated"
)
)
colnames(post_jan) <- c(
"a_iso",
"a_pop",
"adm_td",
"adm_a1d",
"adm_fv"
)
# pre_jan data
## Fully vaccinated persons
pre_jan$cov_total_fv <- (as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop))
# post_jan data
## Fully vaccinated persons
post_jan$cov_total_fv <- (as.numeric(post_jan$adm_fv) / as.numeric(post_jan$a_pop))
# Export data to Excel
all_df <- list(
"pre_jan_data" = pre_jan,
"post_jan_data" = post_jan
)
write_xlsx(all_df, "data/output/lilys_output.xlsx")
View(all_df)
## Fully vaccinated persons
pre_jan$cov_total_fv <- (as.numeric(pre_jan$adm_fv) / as.numeric(pre_jan$a_pop))
pre_jan$Then <- as.numeric(pre_jan$cov_total_fv * 100)
# post_jan data
## Fully vaccinated persons
post_jan$cov_total_fv <- (as.numeric(post_jan$adm_fv) / as.numeric(post_jan$a_pop))
post_jan$Now <- as.numeric(post_jan$cov_total_fv * 100)
summ_data <- as.numeric(post_jan$Now - pre_jan$Then)
summ_data
summ_data <- as.data.frame(post_jan$Now - pre_jan$Then)
summ_data
# Export data to Excel
all_df <- list(
"pre_jan_data" = pre_jan,
"post_jan_data" = post_jan,
"summary" = summ_data
)
write_xlsx(all_df, "data/output/lilys_output.xlsx")
# Summary
summ_data <- as.numeric(post_jan$Now - pre_jan$Then)
summ_data
# Summary
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data <- as.numeric(Now - Then)
summ_data
# Export data to Excel
all_df <- list(
"pre_jan_data" = pre_jan,
"post_jan_data" = post_jan,
"summary" = summ_data
)
write_xlsx(all_df, "data/output/lilys_output.xlsx")
summ_data
View(summ_data)
as.data.frame(summ_data)
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data <- as.data.frame(Now - Then)
summ_data
# Export data to Excel
all_df <- list(
"pre_jan_data" = pre_jan,
"post_jan_data" = post_jan,
"summary" = summ_data
)
write_xlsx(all_df, "data/output/lilys_output.xlsx")
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data <- as.numeric(Now - Then)
summ_data <- as.data.frame(summ_data)
# Summary
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data <- as.numeric(summ_data$Now - summ_data$Then)
summ_data <- as.numeric(summ_data$Now) - as.numeric(summ_data$Then)
summ_data <- as.numeric(Now - Then)
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data$perc_change <- as.numeric(Now - Then)
summ_data <- as.data.frame(summ_data)
# Summary
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data$perc_change <- as.numeric(Now - Then)
summ_data$perc_change <- as.numeric(summ_data$Now - summ_data$Then)
# Summary
summ_data$Now <- post_jan$Now
summ_data$Then <- pre_jan$Then
summ_data
# Export data to Excel
all_df <- list(
"pre_jan_data" = pre_jan,
"post_jan_data" = post_jan
)
write_xlsx(all_df, "data/output/lilys_output.xlsx")
